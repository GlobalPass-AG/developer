"use strict";(self.webpackChunkglobalpass_docs=self.webpackChunkglobalpass_docs||[]).push([[247],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,l=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,g=u["".concat(l,".").concat(m)]||u[m]||d[m]||s;return n?a.createElement(g,i(i({ref:t},p),{},{components:n})):a.createElement(g,i({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,i=new Array(s);i[0]=m;var o={};for(var l in t)hasOwnProperty.call(t,l)&&(o[l]=t[l]);o.originalType=e,o[u]="string"==typeof e?e:r,i[1]=o;for(var c=2;c<s;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3026:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const s={sidebar_position:2},i="Retrieving Screening Data",o={unversionedId:"api-integration-guide/kyc-screenings/retrieving-screening-data",id:"api-integration-guide/kyc-screenings/retrieving-screening-data",title:"Retrieving Screening Data",description:'During and after the screening process ends, you will receive webhooks (HTTP POST requests) to the webhook callback URL you provide to the GlobalPass support team. When receiving these requests, ensure that the body value of "secret" matches the webhook secret we will provide.',source:"@site/docs/api-integration-guide/kyc-screenings/retrieving-screening-data.md",sourceDirName:"api-integration-guide/kyc-screenings",slug:"/api-integration-guide/kyc-screenings/retrieving-screening-data",permalink:"/api-integration-guide/kyc-screenings/retrieving-screening-data",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"apiIntegrationGuideSidebar",previous:{title:"Initiating a KYC Screening",permalink:"/api-integration-guide/kyc-screenings/initiating-a-kyc-screening"},next:{title:"Retrieving Original Files",permalink:"/api-integration-guide/kyc-screenings/retrieving-original-files"}},l={},c=[],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"retrieving-screening-data"},"Retrieving Screening Data"),(0,r.kt)("p",null,"During and after the screening process ends, you will receive ",(0,r.kt)("strong",{parentName:"p"},"webhooks"),' (HTTP POST requests) to the webhook callback URL you provide to the GlobalPass support team. When receiving these requests, ensure that the body value of "secret" matches the webhook secret we will provide.'),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Webhook types:")),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"screening.submitted"),(0,r.kt)("td",{parentName:"tr",align:null},"User has completed the ",(0,r.kt)("strong",{parentName:"td"},"identity mode")," or ",(0,r.kt)("strong",{parentName:"td"},"regular")," widget session, all data for the screening has been submitted. It is recommended to disable user's access to the identity or regular widget once this webhook is received, as the widget will not allow the user to submit any more data, unless the screening status changes to rejected with rejectReason BadData or DocumentExpired, or if document begins approaching expiration following the Auto-Expiry flow.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"screening.change"),(0,r.kt)("td",{parentName:"tr",align:null},"When ",(0,r.kt)("strong",{parentName:"td"},"identity")," or ",(0,r.kt)("strong",{parentName:"td"},"regular")," screening status changes")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"screening.report.completed"),(0,r.kt)("td",{parentName:"tr",align:null},"PDF report of the screening is generated and ready to be retrieved")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"screening.aml.completed"),(0,r.kt)("td",{parentName:"tr",align:null},"When AML screening is completed (",(0,r.kt)("em",{parentName:"td"},"should be ignored in KYC screenings"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"address.submitted"),(0,r.kt)("td",{parentName:"tr",align:null},"User has completed the ",(0,r.kt)("strong",{parentName:"td"},"address mode")," widget session, all data for the screening has been submitted. It is recommended to disable user's access to the address widget once this webhook is received, as the widget will not allow the user to submit any more data, unless the screening status changes to rejected with rejectReason BadData")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"address.change"),(0,r.kt)("td",{parentName:"tr",align:null},"When ",(0,r.kt)("strong",{parentName:"td"},"address")," screening status changes")))),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Example webhooks:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "screening.submitted",\n  "data": {\n    "screeningToken": "bf42e9f1-9af8-4a6b-a1fd-9440f1fe9bfd"\n  },\n  "secret": "secret"\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "screening.change",\n  "data": {\n    "screeningToken": "bf42e9f1-9af8-4a6b-a1fd-9440f1fe9bfd"\n  },\n  "secret": "secret"\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "type": "address.submitted",\n  "data": {\n    "screeningToken": "bf42e9f1-9af8-4a6b-a1fd-9440f1fe9bfd"\n  },\n  "secret": "secret"\n}\n')),(0,r.kt)("p",null,"To get screenings status, make an HTTP GET request to:"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"/api/v2/screenings/{screeningToken}/status")," \u2013 identity mode & regular"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"/api/v2/screenings/{screeningToken}/address/status")," \u2013 address mode"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example request"',title:'"Example','request"':!0},"curl --location  --request GET 'https://screenings-api-test.globalpass.ch/api/v2/screenings/9519c730-5d6e-4c23-b89a-8c4d06899e7f/status' --header 'Authorization: Bearer {your_access_token}'\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example response #1"',title:'"Example',response:!0,'#1"':!0},'{\n  "status": "Accepted",\n  "riskLevel": "Low",\n  "comments": ["KYC verification completed successfully."],\n  "tags": ["Expiring"]\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example response #2"',title:'"Example',response:!0,'#2"':!0},'{\n  "status": "Rejected",\n  "rejectReason": "BadData",\n  "comments": [\n    "The security of the network used for the identity verification process could not be validated successfully. Please repeat the identity verification process using a different network, or disable any VPN or web proxy software, if used."\n  ],\n  "tags": ["Suspicious"]\n}\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Example response #3"',title:'"Example',response:!0,'#3"':!0},'{\n  "status": "Rejected",\n  "rejectReason": "ConditionsNotMet",\n  "comments": [\n    "After a careful evaluation of the personal information and documents that were submitted, our KYC compliance team has unfortunately taken the final decision to reject your application."\n  ],\n  "tags": ["Blacklisted", "Duplicate"]\n}\n')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Possible ",(0,r.kt)("strong",{parentName:"p"},"riskLevel")," values:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Low"),(0,r.kt)("li",{parentName:"ul"},"Medium"),(0,r.kt)("li",{parentName:"ul"},"High")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Possible ",(0,r.kt)("strong",{parentName:"p"},"status")," values:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Initiated"),(0,r.kt)("li",{parentName:"ul"},"Processing"),(0,r.kt)("li",{parentName:"ul"},"Accepted"),(0,r.kt)("li",{parentName:"ul"},"Rejected")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Possible ",(0,r.kt)("strong",{parentName:"p"},"rejectReason")," values:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"BadData"),(0,r.kt)("li",{parentName:"ul"},"ConditionsNotMet"),(0,r.kt)("li",{parentName:"ul"},'DocumentExpired"')),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Possible ",(0,r.kt)("strong",{parentName:"p"},"tags")," values:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Blacklisted"),(0,r.kt)("li",{parentName:"ul"},"AML"),(0,r.kt)("li",{parentName:"ul"},"Duplicate"),(0,r.kt)("li",{parentName:"ul"},"Suspicious"),(0,r.kt)("li",{parentName:"ul"},"Expiring"),(0,r.kt)("li",{parentName:"ul"},"Expired")),(0,r.kt)("p",null,"If ",(0,r.kt)("strong",{parentName:"p"},"rejectReason"),' is "BadData" or "DocumentExpired", you should prompt the user to go through the widget process again and provide the ',(0,r.kt)("strong",{parentName:"p"},"same screening token")," as used in the previous user's session to the widget. This way user will only need to repeat the specific screening sections that he failed during the previous attempt, and his screening report will update with the newly provided data."),(0,r.kt)("p",null,"To get full screening data, make an HTTP GET request to:"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"/api/v2/screenings/{screeningToken}")," \u2013 identity mode & regular"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"/api/v2/screenings/{screeningToken}/address")," \u2013 address mode"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example request"',title:'"Example','request"':!0},"curl --location --request GET 'https://screenings-api-test.globalpass.ch/api/v2/screenings/9519c730-5d6e-4c23-b89a-8c4d06899e7f' --header 'Authorization: Bearer {your_access_token}'\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example response"',title:'"Example','response"':!0},'{\n    "resourceId": "9519c730-5d6e-4c23-b89a-8c4d06899e7f",\n    "screeningStatus": {\n        "status": "Accepted",\n        "riskLevel": "Low",\n        "comments": ["KYC verification completed successfully."],\n        "tags": ["Expiring"]\n    },\n    "basicData": {\n        "firstName": "Sven",\n        "middleName": "",\n        "lastName": "Specimen",\n        "givenNames": "Sven",\n        "surname": "Specimen",\n        "dateOfBirth": "1987-03-14",\n        "gender": "Male",\n        "personalIdentificationNumber": "198703142391",\n        "nationality": "SWE"\n    },\n    "documentData": {\n        "documentNumber": "59000001",\n        "countryOfIssue": "SWE",\n        "expiryDate": "2017-01-02T00:00:00",\n        "documentType": "Passport",\n        "dateOfIssue": "2012-01-02T00:00:00"\n    },\n    "addressData": {\n        "countryCode": "CHE",\n        "city": "Zug",\n        "address": "Metallstrasse 8",\n        "postCode": "6300"\n    }\n}\n')),(0,r.kt)("p",null,"Country codes are provided in ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ISO_3166-1_alpha-3"},"ISO 3166-1 Alpha-3")," format."),(0,r.kt)("p",null,"To retrieve ",(0,r.kt)("strong",{parentName:"p"},"AML scan results")," from a completed screening, make an HTTP GET request to:"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"/api/v2/screenings/{screeningToken}/aml/matches")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash",metastring:'title="Example request"',title:'"Example','request"':!0},"curl --location --request GET 'https://screenings-api-test.globalpass.ch/api/v2/screenings/9519c730-5d6e-4c23-b89a-8c4d06899e7f/aml/matches' --header 'Authorization: Bearer {your_access_token}'\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="Example response"',title:'"Example','response"':!0},'{\n  "screeningToken": "9519c730-5d6e-4c23-b89a-8c4d06899e7f",\n  "created": "2022-12-28T11:04:25.0931836Z",\n  "matches": [\n    {\n      "name": "Ali, Muhamad",\n      "matchScore": 99.99999,\n      "category": "Enforcement",\n      "subCategory": "Corruption",\n      "source": {\n          "name": "ZA-South African Police Service",\n          "countryName": "South Africa",\n          "countryCode": "ZAF"\n      }\n    },\n    {\n      "name": "Ali, Mohammad",\n      "matchScore": 91.11111,\n      "level": "National",\n      "category": "PEP",\n      "subCategory": "Former PEP",\n      "source": {\n          "name": "Website",\n          "countryName": "International"\n      }\n    },\n    {\n      "name": "Ali Mohammed",\n      "matchScore": 74.44444,\n      "category": "Sanction List",\n      "source": {\n          "name": "US-U.S. Office of Foreign Asset Control (OFAC) - SDN List",\n          "countryName": "United States",\n          "countryCode": "USA"\n      }\n    }\n  ]\n}\n')),(0,r.kt)("p",null,"Where:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"name"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the detected possible AML match")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"matchScore"),(0,r.kt)("td",{parentName:"tr",align:null},"AML match strength. Values up to 99.9999 (highest possible strength)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"category"),(0,r.kt)("td",{parentName:"tr",align:null},'AML match category. Possible categories: "Sanction List", "PEP", "Adverse Media", "Enforcement". One match will have one category.')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subCategory"),(0,r.kt)("td",{parentName:"tr",align:null},"Available only for PEP, Adverse Media and Enforcement categories. Specifies subcategory of the main category (e.g., PEP \u2013 Family Member, Adverse Media \u2013 Burglary, etc.).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"level"),(0,r.kt)("td",{parentName:"tr",align:null},'Available only for PEP category. Specifies PEP level \u2013 "International", "National", "State", or "Local".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source"),(0,r.kt)("td",{parentName:"tr",align:null},"Information about the source of the AML hit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.name"),(0,r.kt)("td",{parentName:"tr",align:null},'Name of the source of the hit. Will return exact name of the source when the hit was found on an original list. Will return "Website" when the hit was found in media sources.')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.countryName"),(0,r.kt)("td",{parentName:"tr",align:null},'Full name of the country that listed the hit (e.g., country that released a sanction list where the hit was count). Will return full country name of the source when the hit was found on an original list. Will return "International" when the hit was found in media sources, or in case of "Consolidated Sanctions List" hit.')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"source.countryCode"),(0,r.kt)("td",{parentName:"tr",align:null},"3-letter code in ",(0,r.kt)("em",{parentName:"td"},"ISO 3166-1 Alpha-3"),' format of the country that released the hit. Available only when countryName is not "International", but a specific country.')))),(0,r.kt)("p",null,"To access any given screening report, you can navigate to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://portal-test.globalpass.ch/screenings/%7BscreeningToken%7D/report"},"https://portal-test.globalpass.ch/screenings/{screeningToken}/report")," (",(0,r.kt)("em",{parentName:"li"},"sandbox"),")"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://portal.globalpass.ch/screenings/%7BscreeningToken%7D/report"},"https://portal.globalpass.ch/screenings/{screeningToken}/report")," (",(0,r.kt)("em",{parentName:"li"},"production"),")")))}d.isMDXComponent=!0}}]);